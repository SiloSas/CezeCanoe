<form class="column large-12" ng-submit="paiement = true" data-ng-show="!paiement"> <span data-ng-show="controller.lang == 'Fr'"><h1 class="textColorWhite">Reservez votre descente</h1></span> <span data-ng-show="controller.lang == 'En'"><h1 class="textColorWhite">Book your trip</h1></span> <h1 class="textColorWhite">{{nameDescente = (descente.name | filter: {'lang': controller.lang})[0].presentation}}</h1> <span data-ng-bind-html="presentation = (descente.presentation | filter: {'lang': controller.lang})[0].presentation"></span> <div ng-show="!paiement" class="float-left"> <h3>Informations Générales</h3> <div class="column large-6"> <md-datepicker ng-model="booking.date" class="float-left width100p" style="background: transparent" md-placeholder="date" ng-change="controller.changeMinHour(booking.date)" md-min-date="controller.minDate" required> </md-datepicker> </div> <md-input-container class="column large-3"> <label class="textBlack" data-ng-show="controller.lang == 'Fr'"><b>Heure de départ: </b></label> <label class="textBlack" data-ng-show="controller.lang == 'En'"><b>Start Hours: </b></label> <input type="number" ng-model="hours" ng-change="booking.startTime = hours + ' : ' + minutes" ng-init="hours = controller.minHour; booking.startTime = hours" min="{{controller.minHour}}" max="15" required> </md-input-container> <md-input-container class="column large-3"> <label class="textBlack" data-ng-show="controller.lang == 'Fr'"><b>Minutes</b></label> <label class="textBlack" data-ng-show="controller.lang == 'En'"><b> Minutes</b></label> <input type="number" ng-model="minutes" step="5" min="0" max="60" ng-change="booking.startTime = hours + ' : ' + minutes" ng-init="minutes = 00" required> </md-input-container> <md-input-container class="column large-6"> <label class="textBlack" data-ng-show="controller.lang == 'Fr'"><b>Nom: </b></label> <label class="textBlack" data-ng-show="controller.lang == 'En'"><b>Name:</b></label> <input type="text" ng-model="booking.name" required> </md-input-container> <md-input-container class="column large-6"> <label class="textBlack" data-ng-show="controller.lang == 'Fr'"><b>Prénom:</b></label> <label class="textBlack" data-ng-show="controller.lang == 'En'"><b>First name:</b></label> <input type="text" ng-model="booking.firstName" required> </md-input-container> <md-input-container class="column large-6"> <label class="textBlack" data-ng-show="controller.lang == 'Fr'"><b>Adresse:</b></label> <label class="textBlack" data-ng-show="controller.lang == 'En'"><b>Address:</b></label> <input type="text" ng-model="booking.address" required> </md-input-container> <md-input-container class="column large-6"> <label class="textBlack" data-ng-show="controller.lang == 'Fr'"><b>Telephone:</b></label> <label class="textBlack" data-ng-show="controller.lang == 'En'"><b>Phone number:</b></label> <input type="text" ng-model="booking.phoneNumber" required> </md-input-container> <md-input-container class="column large-6"> <label class="textBlack"><b>Email:</b></label> <input type="email" ng-model="booking.email" required> </md-input-container> <h3 class="column large-12 textBlack">Choix des embarcations</h3> <div data-ng-repeat="price in descente.prices" class="column large-12 float-left md-whiteframe-z1 marginTop10" ng-if="price.isBookable"> <md-input-container class="column medium-6"> <label class="textBlack"><b>nombre de: {{name = (price.name | filter: {'lang': controller.lang})[0].presentation}} ({{price.price}} €)</b></label> <input type="number" min="0" ng-model="number" ng-change="computeTotalPrice(price, number)"> <div data-ng-show="number">Sous-total: {{number*price.price}} €</div> </md-input-container> <div class="column medium-6"> <smart-crop image="{{price.medias[0]}}" class="width100p float-left relative" style="overflow: hidden" width="100%" height="0.41w" hide-sm> </smart-crop> </div> </div> <div data-ng-repeat="price in tariffs" class="column large-12 float-left md-whiteframe-z1 marginTop10" ng-if="price.isBookable"> <md-input-container class="column medium-6" ng-if="!price.isSupplement"> <label class="textBlack"> <b>nombre de: {{name = (price.name | filter: {'lang': controller.lang})[0].presentation}} ({{price.price}} €)</b></label> <input type="number" min="0" ng-model="number" ng-change="computeTotalPrice(price, number); controller.computeReduction()"> <div data-ng-show="number">Sous-total: {{number*price.price}} €</div> </md-input-container> <md-input-container class="column medium-6" ng-if="price.isSupplement"> <label class="textBlack"> <b>nombre de: {{name = (price.name | filter: {'lang': controller.lang})[0].presentation}} ({{price.price + descente.prices[0].price}} €)</b></label> <input type="number" min="0" ng-model="number" ng-change="computeTotalPrice(price, number); controller.computeReduction()"> <div data-ng-show="number">Sous-total: {{number*price.price + number*descente.prices[0].price}} €</div> </md-input-container> <div class="column medium-6"> <smart-crop image="{{price.medias[0]}}" class="width100p float-left relative" style="overflow: hidden" width="100%" height="0.41w" hide-sm> </smart-crop> </div> </div> <div class="column large-12"><b data-ng-show="total > 0">Total: {{total}} €</b></div> <div class="column large-12"> <md-checkbox ng-model="booking.isGroup" ng-change="controller.isGroup = booking.isGroup; controller.computeReduction()" ng-init="booking.isGroup = false" aria-label="isGroup" class="md-primary"> Bénéficier d'une réduction de groupe de {{descente.groupReduction}}% (minimum 10 persones)? <span data-ng-show="controller.reduction > 0"> reduction: {{controller.reduction}} €</span> </md-checkbox> <span data-ng-show="booking.isGroup" class="column"><b>Total: {{total - controller.reduction}} €</b></span></div> </div> <div class="column large-12"> <b>Message</b> <textarea ng-model="message" class="column large-12"></textarea> </div><br> <md-checkbox ng-model="conditionGeneral" aria-label="conditionGeneral" class="md-primary"> J'accepte les <a href="#/conditionGeneral" style="color: #3B8686">conditions générales</a> </md-checkbox><br> <md-checkbox ng-model="nager" aria-label="nager" class="md-primary"> Je certifie savoir nager. </md-checkbox><br> <md-button class="md-button md-primary md-raised" ng-disabled="!(total > 0) || !conditionGeneral || !nager" type="submit" data-ng-show="!paiement"> Payer </md-button> </form> <form data-ng-show="paiement" ng-submit="controller.sendBooking(booking, creditCard, message)"> <div class="column"><img class="column large-4" src="/assets/images/payPalBanner.svg"></div> <div class="column"> <md-input-container class="float-left"> <label>Numero de carte</label> <input type="text" ng-model="creditCard.number" required> </md-input-container> <md-input-container class="float-left"> <label>Type</label> <md-select ng-model="creditCard.card_type" required> <md-option value="visa"> Visa </md-option> <md-option value="mastercard"> Mastercard </md-option> </md-select> </md-input-container> <md-input-container class="float-left"> <label>Mois expiration</label> <input type="number" max="12" ng-model="creditCard.expire_month" required> </md-input-container> <md-input-container class="float-left"> <label>Année d'expiration</label> <input type="number" maxlength="4" ng-model="creditCard.expire_year" required> </md-input-container> <md-input-container class="float-left"> <label>cvv2</label> <input type="number" maxlength="3" ng-model="creditCard.cvv2" required> </md-input-container> <md-input-container class="float-left"> <label>Prenom</label> <input type="text" ng-init="creditCard.first_name = booking.firstName" ng-model="creditCard.first_name" required> </md-input-container> <md-input-container class="float-left"> <label>Nom</label> <input type="text" ng-init="creditCard.last_name = booking.lastName" ng-model="creditCard.last_name" required> </md-input-container> </div> <md-button type="submit" class="md-primary md-hue-1 md-raised float-left">Valider</md-button> </form> <div class="column padding50"></div>