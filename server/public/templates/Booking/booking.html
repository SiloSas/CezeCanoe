<form class="column large-12" ng-submit="controller.sendBooking(booking, creditCard)"> <span data-ng-show="controller.lang == 'Fr'"><h1 class="textColorWhite">Reservez votre descente</h1></span> <span data-ng-show="controller.lang == 'En'"><h1 class="textColorWhite">Book your trip</h1></span> <h1 class="textColorWhite">{{nameDescente = (descente.name | filter: {'lang': controller.lang})[0].presentation}}</h1> <span data-ng-bind-html="presentation = (descente.presentation | filter: {'lang': controller.lang})[0].presentation"></span> <div ng-show="!paiement" class="float-left"> <h3>Informations Générales</h3> <div class="column large-6"> <md-datepicker ng-model="booking.date" class="float-left width100p" style="background: transparent" md-placeholder="date" md-min-date="controller.minDate" required> </md-datepicker> </div> <md-input-container class="column large-6"> <label class="textColorWhite" data-ng-show="controller.lang == 'Fr'"><b>Heure de départ: </b></label> <label class="textColorWhite" data-ng-show="controller.lang == 'En'"><b>Start time: </b></label> <input type="time" ng-model="booking.startTime" required> </md-input-container> <md-input-container class="column large-6"> <label class="textColorWhite" data-ng-show="controller.lang == 'Fr'"><b>Nom: </b></label> <label class="textColorWhite" data-ng-show="controller.lang == 'En'"><b>Name:</b></label> <input type="text" ng-model="booking.name" required> </md-input-container> <md-input-container class="column large-6"> <label class="textColorWhite" data-ng-show="controller.lang == 'Fr'"><b>Prénom:</b></label> <label class="textColorWhite" data-ng-show="controller.lang == 'En'"><b>First name:</b></label> <input type="text" ng-model="booking.firstName" required> </md-input-container> <md-input-container class="column large-6"> <label class="textColorWhite" data-ng-show="controller.lang == 'Fr'"><b>Adresse:</b></label> <label class="textColorWhite" data-ng-show="controller.lang == 'En'"><b>Address:</b></label> <input type="text" ng-model="booking.address" required> </md-input-container> <md-input-container class="column large-6"> <label class="textColorWhite" data-ng-show="controller.lang == 'Fr'"><b>Telephone:</b></label> <label class="textColorWhite" data-ng-show="controller.lang == 'En'"><b>Phone number:</b></label> <input type="text" ng-model="booking.phoneNumber" required> </md-input-container> <md-input-container class="column large-6"> <label class="textColorWhite"><b>Email:</b></label> <input type="email" ng-model="booking.email" required> </md-input-container> <h3 class="column large-12 textColorWhite">Choix des embarcations</h3> <div data-ng-repeat="price in descente.prices" class="column large-12 float-left md-whiteframe-z1 marginTop10" ng-if="price.isBookable"> <md-input-container class="column medium-6"> <label class="textColorWhite"><b>nombre de: {{name = (price.name | filter: {'lang': controller.lang})[0].presentation}} ({{price.price}} €)</b></label> <input type="number" min="0" ng-model="number" ng-change="computeTotalPrice(price, number)"> <div data-ng-show="number">Sous-total: {{number*price.price}} €</div> </md-input-container> <div class="column medium-6"> <smart-crop image="{{price.medias[0]}}" class="width100p float-left relative" style="overflow: hidden" width="100%" height="0.41w" hide-sm> </smart-crop> </div> </div> <div data-ng-repeat="price in tariffs" class="column large-12 float-left md-whiteframe-z1 marginTop10" ng-if="price.isBookable"> <md-input-container class="column medium-6" ng-if="!price.isSupplement"> <label class="textColorWhite"> <b>nombre de: {{name = (price.name | filter: {'lang': controller.lang})[0].presentation}} ({{price.price}} €)</b></label> <input type="number" min="0" ng-model="number" ng-change="computeTotalPrice(price, number); controller.computeReduction()"> <div data-ng-show="number">Sous-total: {{number*price.price}} €</div> </md-input-container> <md-input-container class="column medium-6" ng-if="price.isSupplement"> <label class="textColorWhite"> <b>nombre de: {{name = (price.name | filter: {'lang': controller.lang})[0].presentation}} ({{price.price + descente.prices[0].price}} €)</b></label> <input type="number" min="0" ng-model="number" ng-change="computeTotalPrice(price, number); controller.computeReduction()"> <div data-ng-show="number">Sous-total: {{number*price.price + number*descente.prices[0].price}} €</div> </md-input-container> <div class="column medium-6"> <smart-crop image="{{price.medias[0]}}" class="width100p float-left relative" style="overflow: hidden" width="100%" height="0.41w" hide-sm> </smart-crop> </div> </div> <div class="column large-12"><b data-ng-show="total > 0">Total: {{total}} €</b></div> <div class="column large-12"> <md-checkbox ng-model="booking.isGroup" ng-change="controller.isGroup = booking.isGroup; controller.computeReduction()" ng-init="booking.isGroup = false" aria-label="isGroup" class="md-primary"> Bénéficier d'une réduction de groupe de {{descente.groupReduction}}% (minimum 10 persones)? <span data-ng-show="controller.reduction > 0"> reduction: {{controller.reduction}} €</span> </md-checkbox> <span data-ng-show="booking.isGroup" class="column"><b>Total: {{total - controller.reduction}} €</b></span></div> </div> <a class="md-button md-primary md-raised" ng-disabled="!(total > 0)" data-ng-show="!paiement" data-ng-click="paiement = true">Payer</a> <div data-ng-show="paiement"> <md-input-container> <label>Numero de carte</label> <input type="text" ng-model="creditCard.number" required> </md-input-container> <md-input-container> <label>Type</label> <input type="text" ng-model="creditCard.card_type" required> </md-input-container> <md-input-container> <label>Mois expiration</label> <input type="number" max="12" ng-model="creditCard.expire_month" required> </md-input-container> <md-input-container> <label>Année d'expiration</label> <input type="number" maxlength="4" ng-model="creditCard.expire_year" required> </md-input-container> <md-input-container> <label>cvv2</label> <input type="number" maxlength="3" ng-model="creditCard.cvv2" required> </md-input-container> <md-input-container> <label>Prenom</label> <input type="text" ng-init="creditCard.first_name = booking.firstName" ng-model="creditCard.first_name" required> </md-input-container> <md-input-container> <label>Nom</label> <input type="text" ng-init="creditCard.last_name = booking.lastName" ng-model="creditCard.last_name" required> </md-input-container> <md-input-container> <label>Address</label> <input type="text" ng-init="creditCard.billing_address.line1 = booking.address" ng-model="creditCard.billing_address.line1" required> </md-input-container> <md-input-container> <label>Ville</label> <input type="text" ng-model="creditCard.billing_address.city" required> </md-input-container> <md-input-container> <label>Etat</label> <input type="text" ng-model="creditCard.billing_address.state" required> </md-input-container> <md-input-container> <label>Code postal</label> <input type="text" ng-model="creditCard.billing_address.postal_code" required> </md-input-container> <md-input-container> <label>Code Pays</label> <input type="text" ng-model="creditCard.billing_address.country_code" required> </md-input-container> <md-button type="submit" class="md-primary md-hue-1 md-raised float-left">Valider</md-button> </div> <div class="column padding50"></div> </form>